<!DOCTYPE html> 
<html> 
  <head> 
      <meta name="viewport" content="height=device-height,width=device-width,initial-scale=1.0,maximum-scale=1.0" >
  <title>Sign up</title> 
  
  <!-- CSS -->
  <link rel="stylesheet" href="./signup.css">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" type="text/css" href="simpleDialog2/jquery.mobile.simpledialog.min.css" />  
  
  <!-- Modernizer -->
  <script type="text/javascript" src="./modernizr.custom.56582.js"></script>
  
  <!-- jQuery/jQuery Mobile -->
  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
  
  <!-- jqPlot -->
  <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="js/excanvas.js"></script><![endif]-->
  <script language="javascript" type="text/javascript" src="js/jquery.jqplot.min.js"></script>
  <link rel="stylesheet" type="text/css" href="js/jquery.jqplot.css" />

  <script language="javascript" type="text/javascript" src="js/plugins/jqplot.barRenderer.js"></script>
  <script language="javascript" type="text/javascript" src="js/plugins/jqplot.barRenderer.min.js"></script>
  <script language="javascript" type="text/javascript" src="js/plugins/jqplot.categoryAxisRenderer.js"></script>
  <script language="javascript" type="text/javascript" src="js/plugins/jqplot.pointLabels.js"></script>
  <script language="javascript" type="text/javascript" src="js/plugins/jqplot.pointLabels.min.js"></script>

</head> 


<body> 

<!-- Page starts here -->
<div data-role="page" data-theme="b" id="surveyResultsPage" data-add-back-btn="true">

<style>
  #chart1 {
    width:98%;
  }
  #onOffSection {
    margin-top:10px;
  }

</style>

  <div data-role="header" id="hdrMain" name="hdrMain">
     <a href="surveyList.html" data-direction="reverse" rel="external" data-icon="back" data-transition="slide" class="ui-btn-left">Back</a>
    <h1>Class Tempo</h1>
    <a href="Master_Survey.html" data-direction="reverse" rel="external" data-icon="" data-transition="slide" class="ui-btn-right">Logout</a>
  </div>

  <div data-role="content" id="surveyCreatorContent" name="surveyCreatorContent"> 
      <ul id="resultsList" data-role="listview" data-inset="true">
      </ul>

      <div id="chart1" style="height:400px;">
      </div>

      <div id="onOffSection">
      <label for="surveyOnOff" >Survey ON/OFF:</label>
      <select name="surveyOnOff" id="surveyOnOff" data-role="slider" data-theme="c" data-track-theme="a">
        <option value="off">Off</option>
        <option value="on">On</option>
      </select>
    </div>

  
  </div><!-- contentMain -->
  
  <div data-role="footer" id="ftrMain" name="ftrMain"></div>

  <script>
   
    $( '#surveyResultsPage' ).live( 'pageinit',function(event){

        if (Modernizr.sessionstorage) {
            var onOffValue = sessionStorage.onOffValue;
        }
        else {
          var onOffValue = $.cookie("onOffValue");
        }

          $('#resultsList').children().remove('li');

          $('ul#resultsList').append('<li>Mean: </li>');
          $('ul#resultsList').append('<li>Standard Deviation: </li>');

          $('ul#resultsList').listview();
          $('ul#resultsList').listview('refresh');

          if (onOffValue == 'On')
            $('#surveyOnOff').val('on').slider("refresh");
          else
            $('#surveyOnOff').val('off').slider("refresh");



    });

    $( '#surveyResultsPage' ).live('pageshow', function() {
            
        $.jqplot.config.enablePlugins = true;
        var s1 = [40, 30, 100];
        var ticks = ['a', 'b', 'c'];

         console.log("sessionStorage stuff: ",sessionStorage.surveyTokenVar);
        plot1 = $.jqplot('chart1', [s1], {
            // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
            animate: !$.jqplot.use_excanvas,
            title: 'Results',
            seriesDefaults:{
                renderer:$.jqplot.BarRenderer,
                rendererOptions:{ varyBarColor : true },
                pointLabels: {show: true}
            },
            series:[
              {pointLabels:{
                            show: true,
                            labels:['40, 14%', '30, 26%', '100, 60%'],
                            ypadding: 12,
                          }}],
            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks: ticks
                }
            },
            highlighter: { show: false },
            seriesColors: $.merge([ "#55A9D3", "#D4EDE2", "#EA2E49"], $.jqplot.config.defaultColors)
        });
     

    });

    $(document).ready( function () { 


    });

    $('#surveyOnOff').change(function() {

      console.log($('#surveyOnOff').val());

      var currentOnOffValue;
      if ($('#surveyOnOff').val() == 'on')
        currentOnOffValue = 0;
      else
        currentOnOffValue = 1;

     $.post("http://classtempo.org/Survey_app/survey_phpScripts/set_survey_onOff.php?surveyID=" + surveyId + "&onOff=" + currentOnOffValue,function(response){

     });
    })

  </script>
</div> <!-- page1 -->


<!-- Page ends here -->
</body>
</html>
