<!DOCTYPE html> 
<html> 
  <head> 
  <title>Sign up</title> 
  <meta name="viewport" content="height=100%,width=device-width,initial-scale=1.0,maximum-scale=1.0, user-scalable=0" >
    <!-- CSS -->
  <link rel="stylesheet" href="./signup.css">
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
  <link rel="stylesheet" type="text/css" href="simpleDialog2/jquery.mobile.simpledialog.min.css" /> 

  <!-- Modernizer -->
  <script type="text/javascript" src="./modernizr.custom.56582.js"></script>
  <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>

   <!-- simpleDiaglo2 -->
  <script src="simpleDialog2/jquery.mobile.simpledialog2.min.js"></script>
  
  <script>   
   // Global declarations - assignments made in $(document).ready() below

    var onOffValue = null;
    var surveyDescriptionVar = null;

    var MISSING = "missing";
    var EMPTY = "";

  </script>

</head> 
<body> 

<!-- Page starts here -->
<div data-role="page" data-theme="a" id="customSurveyCreatorPage" data-add-back-btn="true"> 

<div id="customSurveyCreatorContainer">

  <div data-role="header" id="hdrMain">
    <h1>Class Tempo</h1>
  </div>

<div data-role="content" id="customsurveyCreatorContent">

  <form id="customSurveyCreatorForm">
s

  <fieldset data-role="controlgroup">
  <legend>Survey On/Off</legend>
      <input type="radio" name="OnOff" id="On" value="On" checked="checked" />
      <label for="On">Survey On</label>

      <input type="radio" name="OnOff" id="Off" value="Off"  />
      <label for="Off">Survey Off</label>
  </fieldset>

  <div data-role="fieldcontain">
    <label for="SurveyDescription">Survey Description:</label>
    <textarea name="SurveyDescription" id="SurveyDescription"></textarea>
  </div>

    <div id="createCustomSurveyButtonDiv">    
    <a id="createCustomSurveyButton" name="createCustomSurveyButton" data-role="button" data-inline="true" data-ajax="false">Create Survey</a>
    </div>

    </form>
  </div>
</div>

  <div id="footer" data-role="footer">
  </div>

<script>

/* Convenience Methods and page set-up */
function showSimpleDialogue(alertHeader, alertMessage) {
    
    $(document).simpledialog2({
                    mode: 'button',
                    headerText: alertHeader,
                    buttonPrompt: alertMessage,
                    headerClose: false,
                    buttons : {
                      'OK': {
                        click: function () { 
                        }
                      }
                    }
             })
 }
 
/* DOCUMENT READY */

$(document).ready(function() {
  console.log("ready");
});
    
$('#createCustomSurveyButton').click(function() { 
  /*
        $('input[name=OnOff]').each(function() { 
            onOffValue = $('input[name=OnOff]:checked').val();
        })

        $('input[name=numbersOrLetters]').each(function() { 
            numbersOrLetters = $('input[name=numbersOrLetters]:checked').val();
        })

        var currentEmailVar;
        var currentUserTagVar;

          if (Modernizr.sessionstorage) {
              currentEmailVar = sessionStorage.emailVar;
              currentUserTagVar = sessionStorage.userTagVar;
          } 
         else {
               currentEmailVar = $.cookie("emailVar");
              currentUserTagVar = $.cookie("userTagVar");
           }

        // Submit the form
        $.post("http://classtempo.org/Survey_app/survey_phpScripts/createSurvey.php?userAuthKey=" + currentUserTagVar + "&numberOfOptions=" + sliderValue.val() + " &numbersOrLetters=" + numbersOrLetters + "&onOff=" + onOffValue + "&surveyDescription=" + surveyDescriptionVar.val() + "&email=" + currentEmailVar, surveyCreatorFormVar.serialize(), function(data){
          
          console.log(data);
          if (data != 'Error') {

              if (numbersOrLetters === 'Numbers'){numbersOrLetters = 0;}
              else {numbersOrLetters = 1;}

            if (Modernizr.sessionstorage) {
              sessionStorage.surveyTag = data;
              sessionStorage.numbersOrLetters = numbersOrLetters;
            }
            else {
              $.cookie("surveyTag",data);
              $.cookie("numbersOrLetters",numbersOrLetters);
            }

            // If we have created a survey successfully go to it's analytics page
            $.mobile.changePage( "surveyResults.html", { transition : "slide"});
          }
          else {
            // show some kind of error message to inform user that there was a problem
            // in creating survey    
          }
        });        
        return false;  
        */    
    });   
    
  </script>
</div> <!-- page1 -->


<!-- Page ends here -->
</body>
</html>
